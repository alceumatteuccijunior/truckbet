(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(27)},22:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(13),o=a.n(r),c=(a(22),a(7)),i=a(3);var s=function(){const[e,t]=Object(n.useState)(""),[a,r]=Object(n.useState)(""),[o,c]=Object(n.useState)("");return l.a.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gray-100"},l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const n=await fetch("https://truckbet.vip/truck-api/public/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:a})});if(!n.ok)return void c("Login inv\xe1lido");const l=await n.json();localStorage.setItem("token",l.token),window.location.href="/dashboard"},className:"bg-white shadow-md rounded px-8 pt-6 pb-8 w-full max-w-md"},l.a.createElement("h2",{className:"text-2xl font-bold mb-6 text-center"},"Login"),l.a.createElement("input",{type:"email",placeholder:"E-mail",value:e,onChange:e=>t(e.target.value),className:"mb-4 w-full px-3 py-2 border rounded",required:!0}),l.a.createElement("input",{type:"password",placeholder:"Senha",value:a,onChange:e=>r(e.target.value),className:"mb-4 w-full px-3 py-2 border rounded",required:!0}),o&&l.a.createElement("p",{className:"text-red-500 text-sm mb-4"},o),l.a.createElement("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded"},"Entrar"),l.a.createElement("p",{className:"mt-4 text-center text-sm"},"Ainda n\xe3o tem conta? ",l.a.createElement("a",{href:"/register",className:"text-blue-600 underline"},"Registrar"))))},m=a(5),u=a(29);var d=function(){const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)({}),[o,c]=Object(n.useState)(null),[i,s]=Object(n.useState)(null);return Object(n.useEffect)(()=>{u.a.get("https://truckbet.vip/truck-api/public/api/bets").then(e=>t(e.data)).catch(e=>console.error("Erro ao buscar apostas: ",e)),u.a.get("http://127.0.0.1:8000/api/me",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(e=>c(e.data)).catch(e=>console.error("Erro ao buscar usu\xe1rio: ",e))},[]),l.a.createElement("div",null,l.a.createElement("h1",null,"Apostas Dispon\xedveis"),i&&l.a.createElement("div",{style:{color:"red"}},i),o&&l.a.createElement("p",null,"Saldo dispon\xedvel: ",l.a.createElement("strong",null,"R$ ",parseFloat(o.saldo).toFixed(2))),0===e.length?l.a.createElement("p",null,"Nenhuma aposta dispon\xedvel"):l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Corrida"),l.a.createElement("th",null,"Piloto"),l.a.createElement("th",null,"Odd"),l.a.createElement("th",null,"Valor"),l.a.createElement("th",null,"Retorno"),l.a.createElement("th",null,"A\xe7\xe3o"))),l.a.createElement("tbody",null,e.map(e=>l.a.createElement("tr",{key:e.id},l.a.createElement("td",null,e.race.nome),l.a.createElement("td",null,e.race_participant.driver.nome),l.a.createElement("td",null,e.odd.valor_odd),l.a.createElement("td",null,l.a.createElement("input",{type:"number",value:a[e.id]||"",onChange:t=>((e,t)=>{s(null),r(a=>Object(m.a)(Object(m.a)({},a),{},{[e]:t}))})(e.id,t.target.value),placeholder:"Valor"})),l.a.createElement("td",null,"R$ ",((e,t)=>!e||isNaN(e)?0:(parseFloat(e)*parseFloat(t)).toFixed(2))(a[e.id],e.odd.valor_odd)),l.a.createElement("td",null,l.a.createElement("button",{onClick:()=>(e=>{const t=parseFloat(a[e]);t&&!isNaN(t)?o&&t>o.saldo?s("Saldo insuficiente para essa aposta."):alert("Aposta de R$".concat(t.toFixed(2)," realizada!")):alert("Digite um valor v\xe1lido para apostar")})(e.id)},"Apostar")))))))};var p=function(){const[e,t]=Object(n.useState)({name:"",email:"",password:"",password_confirmation:""}),[a,r]=Object(n.useState)(""),o=a=>{t(Object(m.a)(Object(m.a)({},e),{},{[a.target.name]:a.target.value}))};return l.a.createElement("div",{style:{padding:20}},l.a.createElement("h1",null,"Registro"),l.a.createElement("form",{onSubmit:async t=>{t.preventDefault();const a=await fetch("https://truckbet.vip/truck-api/public/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)return void r("Erro ao registrar");const n=await a.json();localStorage.setItem("token",n.token),window.location.href="/dashboard"}},l.a.createElement("input",{type:"text",name:"name",placeholder:"Nome",value:e.name,onChange:o}),l.a.createElement("br",null),l.a.createElement("input",{type:"email",name:"email",placeholder:"E-mail",value:e.email,onChange:o}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"password",placeholder:"Senha",value:e.password,onChange:o}),l.a.createElement("br",null),l.a.createElement("input",{type:"password",name:"password_confirmation",placeholder:"Confirmar Senha",value:e.password_confirmation,onChange:o}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit"},"Registrar")),a&&l.a.createElement("p",{style:{color:"red"}},a))};var E=function(){return l.a.createElement("div",{style:{padding:20}},l.a.createElement("h1",null,"Bem-vindo \xe0 aplica\xe7\xe3o"),l.a.createElement(c.b,{to:"/login"},l.a.createElement("button",{style:{marginRight:10}},"Login")),l.a.createElement(c.b,{to:"/register"},l.a.createElement("button",null,"Registrar")))};var b=function(){return l.a.createElement(c.a,null,l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/",element:l.a.createElement(E,null)}),l.a.createElement(i.a,{path:"/login",element:l.a.createElement(s,null)}),l.a.createElement(i.a,{path:"/register",element:l.a.createElement(p,null)}),l.a.createElement(i.a,{path:"/dashboard",element:l.a.createElement(d,null)})))};var h=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,30)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:o}=t;a(e),n(e),l(e),r(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(b,null))),h()}},[[14,1,2]]]);
//# sourceMappingURL=main.ea481d0b.chunk.js.map